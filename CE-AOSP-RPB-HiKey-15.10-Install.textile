h2. Install Instructions - CE AOSP RPB 15.10 - HiKey

This guide describes how to get started with the CE AOSP Reference Platform Build, release 15.10, for HiKey.

For more information about the HiKey development board, please check <ADD LINK>.

h3. Image Components

The CE AOSP RPB 15.10 - HiKey build is composed of the following artifacts:

* Bootloader:
** ARM Trusted Firmware, EDK2/UEFI and Grub2
** For more information about the reference bootloader used by HiKey, please check "Reference-Bootloader-Hikey":https://github.com/96boards/documentation/wiki/Reference-Bootloader-Hikey
** Pre-built files: "http://builds.96boards.org/releases/reference-platform/aosp/hikey/15.10/bootloader":http://builds.96boards.org/releases/reference-platform/aosp/hikey/15.10/bootloader
* Linux Kernel:
** Derived from Linux 3.18 kernel
** Git: https://github.com/96boards/linux.git
** Branch: hikey
* AOSP Android M, latest release (6.0)

h4. Closed source binaries

The following components requires a closed source binary for better hardware support:

* TI wlan firmware (@wl18xx@)
** Git: git://git.ti.com/wilink8-wlan/wl18xx_fw.git
** Branch: R8.6
* Extra firmware files available from firmware-linux
* Mali (requires EULA)

h3. Downloading the pre-built binaries

The build is composed by the traditional android images (boot, cache, system and userdata), but to avoid incompatibilities issues with older bootloaders, or different partition tables, it's recommended to flash the bootloader as well.

Flashing and booting from the external SD Card is not supported by this release.

For bootloader:

bc. wget http://builds.96boards.org/releases/reference-platform/aosp/hikey/15.10/bootloader/l-loader.bin
wget http://builds.96boards.org/releases/reference-platform/aosp/hikey/15.10/bootloader/fip.bin
wget http://builds.96boards.org/releases/reference-platform/aosp/hikey/15.10/bootloader/ptable-linux.img
wget http://builds.96boards.org/releases/reference-platform/aosp/hikey/15.10/bootloader/hisi-idt.py

And for the RPB image:

bc.wget http://builds.96boards.org/releases/reference-platform/aosp/hikey/15.10/boot_fat.uefi.img.tar.xz
wget http://builds.96boards.org/releases/reference-platform/aosp/hikey/15.10/cache.img.tar.xz
wget http://builds.96boards.org/releases/reference-platform/aosp/hikey/15.10/system.img.tar.xz
wget http://builds.96boards.org/releases/reference-platform/aosp/hikey/15.10/userdata.img.tar.xz

Uncompress the .tar.xz files using your operating system file manager, or with the following command, for each file:

bc. xz --decompress [filename].tar.xz; tar -xvf [filename].tar

h3. Flashing

h4. Bootloader

To flash the bootloader the recovery mode is required. For more information about the recovery mode, how to enable and use, please check <ADD LINK FOR REFERENCE BOOTLOADER>

On recovery mode, flash the bootloader with the following command:

bc. sudo python hisi-idt.py --img1=l-loader.bin -d /dev/ttyUSB0
sudo fastboot flash ptable ptable-aosp.img
sudo fastboot flash fastboot fip.bin

Change ttyUSB0 to the right interface name that gets exported to your host system.

h4. Boot, System, Cache and Userdata

Fastboot is required to flash boot, system, cache and userdata.

Due bug <INSERT BUG LINK>, it's recommended to flash every file via recovery mode.

Flashing:

bc. sudo fastboot flash boot boot_fat.uefi.img.tar.xz
sudo fastboot flash cache cache.img
sudo fastboot flash system system.img
sudo fastboot flash userdata userdata.img

Once flashed, make sure recovery mode is not enabled (pin3-pin4 on J15), and reboot the board.

h3. Additional resources

For known issues and more information about this release, please check "https://github.com/96boards/documentation/wiki/ReferenceSoftware":https://github.com/96boards/documentation/wiki/ReferenceSoftware
